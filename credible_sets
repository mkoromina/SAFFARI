#from ossaudiodev import SNDCTL_DSP_SUBDIVIDE
from numpy import expand_dims
import pandas as pd

##the wildcards here are the name of merged dataframes for which the LOCUS finemapped (per SNP) is also noted.
SS = ["daner_bip_pgc3_polyfun_susie_all", "daner_bip_pgc3_polyfun_finemap_all", "daner_bip_pgc3_only_susie_all", "daner_bip_pgc3_only_finemap_all"]

rule all:
 	input:
 	 	expand("output/{ss}_credible_sets.tsv", ss = SS)
		expand("output/{ss}_binned_loci.tsv", ss = SS)

##need to add an extra rule and create merged df with an extra LOCUS column

rule process_CSs_PIPs:
	input: expand("output/{ss}.csv", ss= SS)
	output: expand("output/{ss}_credible_sets.tsv", ss = SS),
	conda: "envs/r.yaml"
	resources: mem_mb = 20000
	script: "scripts/credible_sets.R"


rule binned_loci:
	input: expand("output/{ss}.csv", ss= SS)
	output:  expand("output/{ss}_binned_loci.tsv", ss = SS)
	conda: "envs/r.yaml"
	resources: mem_mb = 20000
	script: "scripts/binned_loci.R"
